
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>abb_irb_120_main</title><meta name="generator" content="MATLAB 9.6"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2019-09-20"><meta name="DC.source" content="abb_irb_120_main.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#2">ABB IRB 120 Robot</a></li><li><a href="#3">Question 1</a></li><li><a href="#4">States</a></li><li><a href="#5">Question 2</a></li><li><a href="#6">DH Parameters</a></li><li><a href="#7">Question 3</a></li><li><a href="#8">a) Create a Matlab function that takes a set of DH parameters (each of</a></li><li><a href="#9">b) Write a loop that goes through all n links to generate the respective</a></li><li><a href="#10">c) Show the symbolic 4x4 SE(3) transformation matrices corresponding</a></li><li><a href="#11">Question 4</a></li><li><a href="#12">Question 5</a></li><li><a href="#13">Question 6</a></li><li><a href="#14">a) Determine the numeric 4x4 homogeneous transformation matrix</a></li></ul></div><pre class="codeinput"><span class="comment">% clc</span>
<span class="comment">% clear all</span>
syms <span class="string">q1</span> <span class="string">q2</span> <span class="string">q3</span> <span class="string">q4</span> <span class="string">q5</span> <span class="string">q6</span>
</pre><h2 id="2">ABB IRB 120 Robot</h2><p>This program simulates the forward kinematics of an ABB IRB 120 robot.</p><h2 id="3">Question 1</h2><p>On a line drawing of the robot (such as from the figure below of the manual), define and label coordinate frames for the base, each link, and the tip. You should do this using the D-H convention from this class. Clearly show the location of the origin and the direction for each axis of each frame that you define. Be sure to use the axis numbering, base &amp; tool frame, and rotation direction conventions provided for the robot and matching that of the simulation. As previously noted, you are expected to use the D-H convention presented in this class &#8211; some other references may have variants in indexing that can cause confusion so be careful with outside references &amp; examples</p><h2 id="4">States</h2><p>
<table>
<tr>
<th>q</th>
<th><span style="font-weight:bold;font-style:italic">theta</span></th>
</tr>
<tr>
<td>q1</td>
<td>theta1</td>
</tr>
<tr>
<td>q2</td>
<td>theta2</td>
</tr>
<tr>
<td>q3</td>
<td>theta3</td>
</tr>
<tr>
<td>q4</td>
<td>theta4</td>
</tr>
<tr>
<td>q5</td>
<td>theta5</td>
</tr>
<tr>
<td>q6</td>
<td>theta6</td>
</tr>
</table>
</p><pre>
&#8240;PNG
</pre><p>Declaring various variables. The final transformation matrices for the n dofs with respect to the origin of the manipulator are stored in every successive nth space of the <i>4x4xn</i> matrix <b>Transforms</b>. Similarly the final transformation matrices for the n dofs with respect to the n-1th frame are stored in every successive nth space of the <i>4x4xn</i> matrix <b>Individual_Transforms</b>.</p><pre class="codeinput"><span class="keyword">global</span> n_dof;
q = [q1 q2 q3 q4 q5 q6].';
[n_dof,m] = size(q);
home_pos = [0 0 0 0 0 0].';
Individual_Transforms = sym(zeros(4,4,n_dof));
Transforms = sym(zeros(4,4,n_dof));
</pre><h2 id="5">Question 2</h2><pre>Determine the D-H parameters for the robot and show a clearly
labeled table. Be sure to include units, identify the joint variables, and
check your joint directions. Generate Matlab variables for each of the 4
parameters as nx1 vectors.</pre><h2 id="6">DH Parameters</h2><p>
<table>
  <tr>
    <th><span style="font-style:italic">n</span></th>
    <th><span style="font-weight:bold">theta</span></th>
    <th>d</th>
    <th>a</th>
    <th>alpha</th>
  </tr>
  <tr>
    <td>1</td>
    <td>q1</td>
    <td>290</td>
    <td>0</td>
    <td>-90</td>
  </tr>
  <tr>
    <td>2</td>
    <td>q2-90</td>
    <td>0</td>
    <td>270</td>
    <td>0</td>
  </tr>
  <tr>
    <td>3</td>
    <td>q3</td>
    <td>0</td>
    <td>70</td>
    <td>-90</td>
  </tr>
  <tr>
    <td>4</td>
    <td>q4</td>
    <td>302</td>
    <td>0</td>
    <td>90</td>
  </tr>
  <tr>
    <td>5</td>
    <td>q5</td>
    <td>0</td>
    <td>0</td>
    <td>-90</td>
  </tr>
  <tr>
    <td>6</td>
    <td>q6</td>
    <td>72</td>
    <td>0</td>
    <td>0</td>
  </tr>
</table>
</p><p>The following section shows the DH Parameters in vector form.</p><pre class="codeinput">thetas = q;
thetas(2,1) = q2 - 90;
thetas
d = [290 0 0 302 0 72].'
a = [0 270 70 0 0 0].'
alpha = [-90 0 -90 90 -90 0].'
</pre><pre class="codeoutput"> 
thetas =
 
      q1
 q2 - 90
      q3
      q4
      q5
      q6
 

d =

   290
     0
     0
   302
     0
    72


a =

     0
   270
    70
     0
     0
     0


alpha =

   -90
     0
   -90
    90
   -90
     0

</pre><h2 id="7">Question 3</h2><h2 id="8">a) Create a Matlab function that takes a set of DH parameters (each of</h2><p>the 4 parameters as an nx1 vector) for a link and returns a 4x4 homogeneous transformation matrix using the following syntax</p><pre class="language-matlab">T = dhparam2matrix(theta, d, a, alpha)
</pre><pre class="language-matlab">
<span class="keyword">function</span> [trans] = dhparam2matrix(theta, d, a, alpha)
    <span class="comment">%DHPARAM2MATRIX This function returns a Homogenous Transformation matrix</span>
    <span class="comment">% given the input parameters a, alpha, theta and d derived from the</span>
    <span class="comment">% DH Parameters of the robot.</span>
    <span class="comment">%   Please enter all values in degrees and not radians.</span>
    
    cos_alpha = @cosd;
    sin_alpha = @sind;
    cos_theta = @cosd;
    sin_theta = @sind;
    
    a11 = cos_theta(theta);
    a12 = -sin_theta(theta)*cos_alpha(alpha);
    a13 = sin_theta(theta)*sin_alpha(alpha);
    a14 = a*cos_theta(theta);
    b11 = sin_theta(theta);
    b12 = cos_theta(theta)*cos_alpha(alpha);
    b13 = -cos_theta(theta)*sin_alpha(alpha);
    b14 = a*sin_theta(theta);
    c11 = 0;
    c12 = sin_alpha(alpha);
    c13 = cos_alpha(alpha);
    c14 = d;
    scl = 1;
    
    trans = [a11 a12 a13 a14;
            b11 b12 b13 b14;
            c11 c12 c13 c14;
            0   0   0   scl];
<span class="keyword">end</span>    

</pre><h2 id="9">b) Write a loop that goes through all n links to generate the respective</h2><p>corresponding transformation matrix</p><h2 id="10">c) Show the symbolic 4x4 SE(3) transformation matrices corresponding</h2><p>to each of the intermediate transformations.</p><p>A for loop adds the transformation of each frame wrt previous frames to a n dimension 4x4 matrix called Individual_Transforms and the transformation of each frame wrt the base frame to a n dimensional 4x4 matrix called Transforms.</p><pre class="codeinput"><span class="keyword">for</span> i = 1:n_dof
    T = dhparam2matrix(thetas(i), d(i), a(i), alpha(i));
    Individual_Transforms(:,:,i) = T;
    <span class="keyword">if</span> i &gt; 1
        Transforms(:,:,i) = simplify(Transforms(:,:,i-1)*T);
    <span class="keyword">else</span>
        Transforms(:,:,i) = T;
    <span class="keyword">end</span>
<span class="keyword">end</span>
</pre><h2 id="11">Question 4</h2><p>Solve for the composite transformation representing the forward kinematics from base to tip ( T0 n ). Be sure to show your work and simplify the solution as much as possible. This will be a large symbolic 4x4 matrix.</p><pre class="codeinput">Transforms(:,:,6)
</pre><pre class="codeoutput"> 
ans =
 
[   cos((pi*q6)/180)*(cos((pi*q5)/180)*(sin((pi*q1)/180)*sin((pi*q4)/180) + sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q4)/180)) + cos((pi*(q2 + q3))/180)*cos((pi*q1)/180)*sin((pi*q5)/180)) + sin((pi*q6)/180)*(cos((pi*q4)/180)*sin((pi*q1)/180) - sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*sin((pi*q4)/180)), cos((pi*q6)/180)*(cos((pi*q4)/180)*sin((pi*q1)/180) - sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*sin((pi*q4)/180)) - sin((pi*q6)/180)*(cos((pi*q5)/180)*(sin((pi*q1)/180)*sin((pi*q4)/180) + sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q4)/180)) + cos((pi*(q2 + q3))/180)*cos((pi*q1)/180)*sin((pi*q5)/180)), cos((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180) - sin((pi*q5)/180)*(sin((pi*q1)/180)*sin((pi*q4)/180) + sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q4)/180)), 2*cos((pi*q1)/180)*(151*cos((pi*(q2 + q3))/180) + 35*sin((pi*(q2 + q3))/180) + 135*sin((pi*q2)/180)) - 72*sin((pi*q5)/180)*(sin((pi*q1)/180)*sin((pi*q4)/180) + sin((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q4)/180)) + 72*cos((pi*(q2 + q3))/180)*cos((pi*q1)/180)*cos((pi*q5)/180)]
[ - sin((pi*q6)/180)*(cos((pi*q1)/180)*cos((pi*q4)/180) + sin((pi*(q2 + q3))/180)*sin((pi*q1)/180)*sin((pi*q4)/180)) - cos((pi*q6)/180)*(cos((pi*q5)/180)*(cos((pi*q1)/180)*sin((pi*q4)/180) - sin((pi*(q2 + q3))/180)*cos((pi*q4)/180)*sin((pi*q1)/180)) - cos((pi*(q2 + q3))/180)*sin((pi*q1)/180)*sin((pi*q5)/180)), sin((pi*q6)/180)*(cos((pi*q5)/180)*(cos((pi*q1)/180)*sin((pi*q4)/180) - sin((pi*(q2 + q3))/180)*cos((pi*q4)/180)*sin((pi*q1)/180)) - cos((pi*(q2 + q3))/180)*sin((pi*q1)/180)*sin((pi*q5)/180)) - cos((pi*q6)/180)*(cos((pi*q1)/180)*cos((pi*q4)/180) + sin((pi*(q2 + q3))/180)*sin((pi*q1)/180)*sin((pi*q4)/180)), sin((pi*q5)/180)*(cos((pi*q1)/180)*sin((pi*q4)/180) - sin((pi*(q2 + q3))/180)*cos((pi*q4)/180)*sin((pi*q1)/180)) + cos((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180), 72*sin((pi*q5)/180)*(cos((pi*q1)/180)*sin((pi*q4)/180) - sin((pi*(q2 + q3))/180)*cos((pi*q4)/180)*sin((pi*q1)/180)) + 2*sin((pi*q1)/180)*(151*cos((pi*(q2 + q3))/180) + 35*sin((pi*(q2 + q3))/180) + 135*sin((pi*q2)/180)) + 72*cos((pi*(q2 + q3))/180)*cos((pi*q5)/180)*sin((pi*q1)/180)]
[                                                                                                                                - cos((pi*q6)/180)*(sin((pi*(q2 + q3))/180)*sin((pi*q5)/180) - cos((pi*(q2 + q3))/180)*cos((pi*q4)/180)*cos((pi*q5)/180)) - cos((pi*(q2 + q3))/180)*sin((pi*q4)/180)*sin((pi*q6)/180),                                                                                                                                sin((pi*q6)/180)*(sin((pi*(q2 + q3))/180)*sin((pi*q5)/180) - cos((pi*(q2 + q3))/180)*cos((pi*q4)/180)*cos((pi*q5)/180)) - cos((pi*(q2 + q3))/180)*cos((pi*q6)/180)*sin((pi*q4)/180),                                                                       - sin((pi*(q2 + q3))/180)*cos((pi*q5)/180) - cos((pi*(q2 + q3))/180)*cos((pi*q4)/180)*sin((pi*q5)/180),                                                                                        70*cos((pi*(q2 + q3))/180) - 302*sin((pi*(q2 + q3))/180) + 270*cos((pi*q2)/180) - 72*sin((pi*(q2 + q3))/180)*cos((pi*q5)/180) - 72*cos((pi*(q2 + q3))/180)*cos((pi*q4)/180)*sin((pi*q5)/180) + 290]
[                                                                                                                                                                                                                                                                                                                    0,                                                                                                                                                                                                                                                                                                                  0,                                                                                                                                                                            0,                                                                                                                                                                                                                                                                                         1]
 
</pre><h2 id="12">Question 5</h2><pre>Plug into the answer for Problem 4 the home/zero joint
configuration</pre><pre class="language-matlab">[0, 0, 0, 0, 0, 0]
</pre><p>as shown in the figure below. Show the numeric 4x4 homogeneous transformation matrix representing the 6-DOF pose tip frame with respect to the base frame. Check that the rotation matrix and the x,y,z offset directions match what you would have expected by inspection of the figure below.</p><pre>
&#8240;PNG
</pre><p>The following function solves this equation while constraining the equation to the joint limits.</p><pre class="codeinput">vals = [0 0 0 0 0 0].';
solution = simplify(fk_solve(Transforms, q, vals, 6))
</pre><pre class="codeoutput"> 
solution =
 
[ 0,  0, 1, 374]
[ 0, -1, 0,   0]
[ 1,  0, 0, 630]
[ 0,  0, 0,   1]
 
</pre><h2 id="13">Question 6</h2><p>For the following joint configuration</p><pre>   [-45, 30, -30, -30, -45, 180],</pre><p>determine the forward kinematics of the end effector (configuration shown below). These values represent the angles with respect to the previous link as we typically use in class.</p><h2 id="14">a) Determine the numeric 4x4 homogeneous transformation matrix</h2><p>representing the tool&#8217;s pose (tip frame) with respect to the base frame for this joint configuration.</p><pre class="language-matlab">&lt;include&gt;images/IRB_W_FRAMES.PNG&lt;/include&gt;
</pre><pre class="codeinput">vals = [45 30 -30 -30 -45 180].';
solution = simplify(fk_solve(Transforms, q, vals, 6))

<span class="comment">% b)</span>
</pre><pre class="codeoutput"> 
solution =
 
[        3/4, -6^(1/2)/4,       1/4,           (437*2^(1/2))/2 + 18]
[        1/4,  6^(1/2)/4,       3/4,           (437*2^(1/2))/2 + 54]
[ -6^(1/2)/4,       -1/2, 6^(1/2)/4, 135*3^(1/2) + 18*6^(1/2) + 360]
[          0,          0,         0,                              1]
 
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019a</a><br></p></div><!--
##### SOURCE BEGIN #####
% clc
% clear all
syms q1 q2 q3 q4 q5 q6

%% ABB IRB 120 Robot
% This program simulates the forward kinematics of an ABB IRB 120 robot.
% 
%% Question 1
% On a line drawing of the robot (such as from the figure below of the
% manual), define and label coordinate frames for the base, each link, and the
% tip. You should do this using the D-H convention from this class. Clearly
% show the location of the origin and the direction for each axis of each frame
% that you define. Be sure to use the axis numbering, base & tool frame, and
% rotation direction conventions provided for the robot and matching that of
% the simulation. As previously noted, you are expected to use the D-H
% convention presented in this class – some other references may have
% variants in indexing that can cause confusion so be careful with outside
% references & examples
%
%% States
% 
% <html>
% <table>
% <tr>
% <th>q</th>
% <th><span style="font-weight:bold;font-style:italic">theta</span></th>
% </tr>
% <tr>
% <td>q1</td>
% <td>theta1</td>
% </tr>
% <tr>
% <td>q2</td>
% <td>theta2</td>
% </tr>
% <tr>
% <td>q3</td>
% <td>theta3</td>
% </tr>
% <tr>
% <td>q4</td>
% <td>theta4</td>
% </tr>
% <tr>
% <td>q5</td>
% <td>theta5</td>
% </tr>
% <tr>
% <td>q6</td>
% <td>theta6</td>
% </tr>
% </table>
% </html>
% 
% <include>images/IRB_W_FRAMES.PNG</include>
%
% Declaring various variables. The final transformation matrices for the n 
% dofs with respect to the origin of the manipulator are stored in every 
% successive nth space of the _4x4xn_ matrix *Transforms*. Similarly the final
% transformation matrices for the n dofs with respect to the n-1th frame
% are stored in every successive nth space of the _4x4xn_ matrix
% *Individual_Transforms*.
% 

global n_dof;
q = [q1 q2 q3 q4 q5 q6].';
[n_dof,m] = size(q);
home_pos = [0 0 0 0 0 0].';
Individual_Transforms = sym(zeros(4,4,n_dof));
Transforms = sym(zeros(4,4,n_dof));

%% Question 2
%  Determine the D-H parameters for the robot and show a clearly
% labeled table. Be sure to include units, identify the joint variables, and
% check your joint directions. Generate Matlab variables for each of the 4
% parameters as nx1 vectors.
% 
%% DH Parameters
% 
% <html>
% <table>
%   <tr>
%     <th><span style="font-style:italic">n</span></th>
%     <th><span style="font-weight:bold">theta</span></th>
%     <th>d</th>
%     <th>a</th>
%     <th>alpha</th>
%   </tr>
%   <tr>
%     <td>1</td>
%     <td>q1</td>
%     <td>290</td>
%     <td>0</td>
%     <td>-90</td>
%   </tr>
%   <tr>
%     <td>2</td>
%     <td>q2-90</td>
%     <td>0</td>
%     <td>270</td>
%     <td>0</td>
%   </tr>
%   <tr>
%     <td>3</td>
%     <td>q3</td>
%     <td>0</td>
%     <td>70</td>
%     <td>-90</td>
%   </tr>
%   <tr>
%     <td>4</td>
%     <td>q4</td>
%     <td>302</td>
%     <td>0</td>
%     <td>90</td>
%   </tr>
%   <tr>
%     <td>5</td>
%     <td>q5</td>
%     <td>0</td>
%     <td>0</td>
%     <td>-90</td>
%   </tr>
%   <tr>
%     <td>6</td>
%     <td>q6</td>
%     <td>72</td>
%     <td>0</td>
%     <td>0</td>
%   </tr>
% </table>
% </html>
% 
% The following section shows the DH Parameters in vector form.
%

thetas = q;
thetas(2,1) = q2 - 90;
thetas
d = [290 0 0 302 0 72].'
a = [0 270 70 0 0 0].'
alpha = [-90 0 -90 90 -90 0].'

%% Question 3
%%% a) Create a Matlab function that takes a set of DH parameters (each of
% the 4 parameters as an nx1 vector) for a link and returns a 4x4
% homogeneous transformation matrix using the following syntax
% 
%   T = dhparam2matrix(theta, d, a, alpha)
% 
% <include>dhparam2matrix.m</include>
% 
%%% b) Write a loop that goes through all n links to generate the respective
% corresponding transformation matrix
% 
%%% c) Show the symbolic 4x4 SE(3) transformation matrices corresponding
% to each of the intermediate transformations. 
% 
% A for loop adds the transformation of each frame wrt previous frames to a
% n dimension 4x4 matrix called Individual_Transforms and the 
% transformation of each frame wrt the base frame to a n dimensional 4x4 
% matrix called Transforms.
% 

for i = 1:n_dof
    T = dhparam2matrix(thetas(i), d(i), a(i), alpha(i));
    Individual_Transforms(:,:,i) = T;
    if i > 1
        Transforms(:,:,i) = simplify(Transforms(:,:,i-1)*T);
    else
        Transforms(:,:,i) = T;
    end
end
%% Question 4
% Solve for the composite transformation representing the forward
% kinematics from base to tip ( T0
% n ). Be sure to show your work and simplify
% the solution as much as possible. This will be a large symbolic 4x4 matrix.
% 
Transforms(:,:,6)

%% Question 5
%  Plug into the answer for Problem 4 the home/zero joint
% configuration 
% 
%   [0, 0, 0, 0, 0, 0] 
% 
% as shown in the figure below. Show the
% numeric 4x4 homogeneous transformation matrix representing the 6-DOF
% pose tip frame with respect to the base frame. Check that the rotation
% matrix and the x,y,z offset directions match what you would have expected
% by inspection of the figure below.
%
% <include>images/home.png</include>
% 
% The following function solves this equation while constraining the
% equation to the joint limits.
% 
vals = [0 0 0 0 0 0].';
solution = simplify(fk_solve(Transforms, q, vals, 6))

%% Question 6
% For the following joint configuration 
% 
%     [-45, 30, -30, -30, -45, 180], 
% 
% determine the forward kinematics of the end effector (configuration
% shown below). These values represent the angles with respect to the
% previous link as we typically use in class. 
% 
%%% a) Determine the numeric 4x4 homogeneous transformation matrix
% representing the tool’s pose (tip frame) with respect to the base
% frame for this joint configuration. 
% 
%   <include>images/IRB_W_FRAMES.PNG</include>
% 
vals = [45 30 -30 -30 -45 180].';
solution = simplify(fk_solve(Transforms, q, vals, 6))

% b)
##### SOURCE END #####
--></body></html>